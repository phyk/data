---
title: "DataImport"
author: "Philipp Peter & Laurenz Harnischmacher"
date: "11 Mai 2019"
output: html_document
---

```{r "knitr config", cache = FALSE, include=FALSE}
require("knitr")
#knitr::opts_knit$set(root.dir = "C:/Github/Programming_Data_Science/ourdata")
#lh_root
knitr::opts_knit$set(root.dir = "C:/Users/Laure/Documents/git_Repositories/phyk_data")
```
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Get the data 

```{r}
library(tidyverse)
library(stringi)
library(hms)

rootDir <- knitr::opts_knit$get("root.dir")
headersPath <- paste(rootDir, "01_data_unterstanding/order_columns.txt", sep="/")
dataPath <- paste(rootDir, "00_raw_data/order_data.csv", sep="/")

# prepare column name list
headersFile = file(headersPath, "r")
headerNames <- list()
#http://r.789695.n4.nabble.com/How-to-read-plain-text-documents-into-a-vector-td901794.html
obj_list <- readLines(headersFile)

#To convert to a vector, do the following:
result <- stri_extract_first(obj_list, regex="[A-z ,]+")
dtype <- stri_extract_last(obj_list, regex="[A-z ,]+")

dataframe <- read_csv(dataPath, col_names = result)
dataframe$order_time <- parse_time(dataframe$"Order Line Date_Time","%H\\:%M\\:%S")


head(dataframe)
```



## Replacing "?" with na
```{r}
library(naniar)
na_strings <- c("?", "NULL")
dataframe <- dataframe %>% replace_with_na_all(condition = ~.x %in% na_strings)
## dataframe <- str_replace_all(dataframe, ";", ",")
head(dataframe)

```

## Clean_dataset
```{r}
#dataframe[!sapply(dataframe, function(x) all(x == ""))]

```


## Including Plots

You can also embed plots, for example:

```{r}
lapply(dataframe, mean)
lapply(dataframe, max)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
